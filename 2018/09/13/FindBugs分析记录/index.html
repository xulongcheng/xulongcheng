<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>FindBugs分析记录 | 龙城</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前言FindBugs解决方案。 参考 官网手册 用FindBugs分析代码漏洞  正文EI: May expose internal representation by returning reference to mutable object 官方描述   Returning a reference to a mutable object value stored in one of the o">
<meta name="keywords" content="FindBugs,Java">
<meta property="og:type" content="article">
<meta property="og:title" content="FindBugs分析记录">
<meta property="og:url" content="https://xulongcheng.github.io/2018/09/13/FindBugs分析记录/index.html">
<meta property="og:site_name" content="龙城">
<meta property="og:description" content="前言FindBugs解决方案。 参考 官网手册 用FindBugs分析代码漏洞  正文EI: May expose internal representation by returning reference to mutable object 官方描述   Returning a reference to a mutable object value stored in one of the o">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://github.com/lucienhsu/lucienhsu.github.io/raw/master/img/post/解决方案.png">
<meta property="og:updated_time" content="2019-01-22T09:37:04.088Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="FindBugs分析记录">
<meta name="twitter:description" content="前言FindBugs解决方案。 参考 官网手册 用FindBugs分析代码漏洞  正文EI: May expose internal representation by returning reference to mutable object 官方描述   Returning a reference to a mutable object value stored in one of the o">
<meta name="twitter:image" content="https://github.com/lucienhsu/lucienhsu.github.io/raw/master/img/post/解决方案.png">
  
    <link rel="alternate" href="/atom.xml" title="龙城" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">龙城</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Welcome</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://xulongcheng.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-FindBugs分析记录" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/13/FindBugs分析记录/" class="article-date">
  <time datetime="2018-09-12T16:00:00.000Z" itemprop="datePublished">2018-09-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/学习笔记/">学习笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      FindBugs分析记录
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>FindBugs解决方案。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ol>
<li><a href="http://findbugs.sourceforge.net/bugDescriptions.html" target="_blank" rel="noopener">官网手册</a></li>
<li><a href="https://www.cnblogs.com/hyddd/tag/hyddd%E7%9A%84FindBugs%E5%88%86%E6%9E%90%E8%AE%B0%E5%BD%95/default.html?page=1" target="_blank" rel="noopener">用FindBugs分析代码漏洞</a></li>
</ol>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h2 id="EI-May-expose-internal-representation-by-returning-reference-to-mutable-object"><a href="#EI-May-expose-internal-representation-by-returning-reference-to-mutable-object" class="headerlink" title="EI: May expose internal representation by returning reference to mutable object"></a>EI: May expose internal representation by returning reference to mutable object</h2><ul>
<li>官方描述  <blockquote>
<p>Returning a reference to a mutable object value stored in one of the object’s fields exposes the internal representation of the object.  If instances are accessed by untrusted code, and unchecked changes to the mutable object would compromise security or other important properties, you will need to do something different. Returning a new copy of the object is better approach in many situations.</p>
</blockquote>
</li>
<li><a href="https://stackoverflow.com/questions/8951107/malicious-code-vulnerability-may-expose-internal-representation-by-returning-r" target="_blank" rel="noopener">解决方案</a></li>
</ul>
<h2 id="EI2-May-expose-internal-representation-by-incorporating-reference-to-mutable-object"><a href="#EI2-May-expose-internal-representation-by-incorporating-reference-to-mutable-object" class="headerlink" title="EI2: May expose internal representation by incorporating reference to mutable object"></a>EI2: May expose internal representation by incorporating reference to mutable object</h2><ul>
<li>官方描述  <blockquote>
<p>This code stores a reference to an externally mutable object into the internal representation of the object.  If instances are accessed by untrusted code, and unchecked changes to the mutable object would compromise security or other important properties, you will need to do something different. Storing a copy of the object is better approach in many situations.</p>
</blockquote>
</li>
<li><a href="https://www.cnblogs.com/hyddd/articles/1391118.html" target="_blank" rel="noopener">解决方案</a><blockquote>
<p><img src="https://github.com/lucienhsu/lucienhsu.github.io/raw/master/img/post/解决方案.png" alt="解决方案"></p>
</blockquote>
</li>
</ul>
<h2 id="Field-is-a-mutable-collection"><a href="#Field-is-a-mutable-collection" class="headerlink" title="Field is a mutable collection"></a>Field is a mutable collection</h2><ul>
<li>官方描述  <blockquote>
<p>A mutable collection instance is assigned to a final static field, thus can be changed by malicious code or by accident from another package. Consider wrapping this field into Collections.unmodifiableSet/List/Map/etc. to avoid this vulnerability.</p>
</blockquote>
</li>
<li><a href="https://blog.csdn.net/ai_xiangjuan/article/details/78248694" target="_blank" rel="noopener">解决方案</a>       <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, Object&gt; ENGIN_DATATYPE;</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    Map&lt;String, Object&gt; aMap = <span class="keyword">new</span> HashMap();</span><br><span class="line">    aMap.put(<span class="string">"Number"</span>, <span class="string">"NUMBER,FLOAT,DOUBLE,DECIMAL,BINARY_FLOAT,BINARY_DOUBLE"</span>);</span><br><span class="line">    aMap.put(<span class="string">"String"</span>, <span class="string">"STRING,VARCHAR,CHAR,NCHAR,VARCHAR2,NVARCHAR2"</span>);</span><br><span class="line">    aMap.put(<span class="string">"Date"</span>, <span class="string">"DATE"</span>);</span><br><span class="line">    aMap.put(<span class="string">"Boolean"</span>, <span class="string">"BOOLEAN"</span>);</span><br><span class="line">    aMap.put(<span class="string">"Integer"</span>, <span class="string">"INTEGER,TINYINT,SMALLINT,MEDIUMINT,INT"</span>);</span><br><span class="line">    aMap.put(<span class="string">"BigNumber"</span>, <span class="string">"BIGNUMBER,BIGINT"</span>);</span><br><span class="line">    aMap.put(<span class="string">"Binary"</span>, <span class="string">"BINARY"</span>);</span><br><span class="line">    aMap.put(<span class="string">"Timestamp"</span>, <span class="string">"TIMESTAMP,DATETIME"</span>);</span><br><span class="line">    aMap.put(<span class="string">"Internet Address"</span>, <span class="string">"INTERNET ADDRESS"</span>);</span><br><span class="line">    ENGIN_DATATYPE = Collections.unmodifiableMap(aMap); <span class="comment">// 创建不可变集合</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xulongcheng.github.io/2018/09/13/FindBugs分析记录/" data-id="cjr7kri270005gns6lc7ust0a" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/FindBugs/">FindBugs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/09/14/读书笔记之《HeadFirst设计模式》/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          读书笔记之《HeadFirst设计模式》
        
      </div>
    </a>
  
  
    <a href="/2018/09/11/家庭保险方案/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">家庭保险方案原则</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Others/">Others</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/书单/">书单</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/备忘/">备忘</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习笔记/">学习笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活经验/">生活经验</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/计划/">计划</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书笔记/">读书笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/转载/">转载</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coding/">Coding</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FindBugs/">FindBugs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/">GitHub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mybatis/">Mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Others/">Others</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reading/">Reading</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reprinted/">Reprinted</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kettle/">kettle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/保险-重疾-轻疾-人寿/">保险/重疾/轻疾/人寿</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/信条/">信条</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/指令/">指令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/时间清单/">时间清单</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/格言/">格言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/牛客网刷题/">牛客网刷题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/程序员/">程序员</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/职业规划/">职业规划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Coding/" style="font-size: 10px;">Coding</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/FindBugs/" style="font-size: 10px;">FindBugs</a> <a href="/tags/GitHub/" style="font-size: 10px;">GitHub</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Mybatis/" style="font-size: 10px;">Mybatis</a> <a href="/tags/Others/" style="font-size: 10px;">Others</a> <a href="/tags/Reading/" style="font-size: 15px;">Reading</a> <a href="/tags/Reprinted/" style="font-size: 10px;">Reprinted</a> <a href="/tags/kettle/" style="font-size: 10px;">kettle</a> <a href="/tags/保险-重疾-轻疾-人寿/" style="font-size: 10px;">保险/重疾/轻疾/人寿</a> <a href="/tags/信条/" style="font-size: 10px;">信条</a> <a href="/tags/指令/" style="font-size: 10px;">指令</a> <a href="/tags/时间清单/" style="font-size: 10px;">时间清单</a> <a href="/tags/格言/" style="font-size: 10px;">格言</a> <a href="/tags/牛客网刷题/" style="font-size: 10px;">牛客网刷题</a> <a href="/tags/程序员/" style="font-size: 10px;">程序员</a> <a href="/tags/职业规划/" style="font-size: 10px;">职业规划</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/01/22/2018-09-7-各操作系统常用指令/">各操作系统常用指令</a>
          </li>
        
          <li>
            <a href="/2019/01/15/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2019/01/09/Java类加载器ClassLoader总结/">Java类加载器ClassLoader总结</a>
          </li>
        
          <li>
            <a href="/2018/11/13/kettle笔记/">kettle笔记</a>
          </li>
        
          <li>
            <a href="/2018/10/25/时间清单/">时间清单:立了FLAG就要去做</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Lucien<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>